{% extends "layout.html" %}

{% block title %}Map{% endblock %}
{% block leaflet %}
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
    integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI="
    crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
     integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM="
     crossorigin=""></script>
{% endblock %}

{% block body %}
    <div id="map"></div>
    <script src="/static/js/editing.js"></script>
    <div id="edit-panel">
        <h4>Edit attributes</h4>
        <button id="close-btn" class="close-btn" onclick="closePanel()">X</button>
        <div class="d-flex align-items-center mb-3">
            <b style="margin-right: 10px">Name</b>
            <input id="name-input" class="ml-2" size="10" type="text" placeholder="30 symbols max">
        </div>
        <div class="d-flex align-items-center">
            <b>Attributes</b>
        </div>
        <table id="attributes-table" class="table table-bordered">
            <thead>
                <tr>
                    <th scope="col">Key</th>
                    <th scope="col">Value</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
        <div class="form-check form-switch" style="padding-bottom: 5px; float: right;">
            <input id="is-completed-chk" class="form-check-input" type="checkbox">
            <label class="form-check-label" for="flexSwitchCheckDefault">Completed</label>
        </div>
        <div>
            <button id="new-key-btn" class="btn btn-primary" onclick="addRow()">Add new row</button>
            <button id="save-edits-btn" class="btn btn-success" onclick="saveEdits()">Save edits</button>
        </div>
        <div>
            <!-- <button id="history-btn" class="btn btn-outline-info" onclick="getMapHistory()">History</button> -->
            <form id="historyForm" action="/getHistory" method="get" target="_blank">
                <button id="list-history-btn" class="btn btn-outline-info" type="button" onclick="getMapHistory()">History</button>
                <input type="hidden" id="history_input" name="id">
            </form>
        </div>
        <div>
            <button id="remove-point-btn" class="btn btn-danger" onclick="removePoint()">Remove point</button>
        </div>
        
    </div>
 
{% endblock %}